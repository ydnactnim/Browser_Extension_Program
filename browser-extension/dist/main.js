document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("geoButton");const e=document.getElementById("submitButton"),t=document.getElementById("cityInput"),n=document.getElementById("suggestions"),a=document.getElementById("error-message"),o=(()=>{let e;return(...a)=>{clearTimeout(e),e=setTimeout((()=>(async e=>{if(e.length<2)return void(n.innerHTML="");const a=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&addressdetails=1&limit=5`;try{const e=await fetch(a),o=await e.json();n.innerHTML="",o.forEach((e=>{const a=document.createElement("div");a.className="suggestion",a.textContent=e.display_name,a.addEventListener("click",(()=>{t.value=e.display_name,n.innerHTML=""})),n.appendChild(a)}))}catch(e){console.error("자동완성 요청 오류:",e)}})(...a)),300)}})();t.addEventListener("input",(e=>{o(e.target.value)})),e.addEventListener("click",(async()=>{const e=t.value.trim();if(e)try{const t=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&addressdetails=1&limit=1`,n=await fetch(t),a=await n.json();if(0===a.length)throw new Error("올바른 위치를 찾을 수 없습니다.");const{lat:o,lon:r}=a[0];!function(e,t,n){document.getElementById("main-content").innerHTML=`\n            <div id="today-weather">\n                <h2>${e}의 오늘 날씨</h2>\n                \x3c!-- 여기에서 날씨 API를 통해 가져온 데이터를 시간별로 표시합니다. --\x3e\n                <div id="hourly-weather"></div>\n            </div>\n            <div id="weekly-weather">\n                <h2>${e}의 일주일 날씨</h2>\n                \x3c!-- 여기에서 날씨 API를 통해 가져온 데이터를 요일별로 표시합니다. --\x3e\n                <div id="daily-weather"></div>\n            </div>\n        `,async function(e,t){try{const n=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&hourly=temperature_2m&daily=temperature_2m_max,temperature_2m_min&current_weather=true`,a=await fetch(n),o=await a.json(),r=document.getElementById("hourly-weather"),i=document.getElementById("daily-weather");o.hourly.temperature_2m.slice(0,8).forEach(((e,t)=>{const n=(new Date).getHours()+3*t,a=document.createElement("div");a.textContent=`${n%24}시: ${e}°C`,r.appendChild(a)})),o.daily.temperature_2m_max.forEach(((e,t)=>{const n=document.createElement("div");n.textContent=`요일 ${t+1}: 최고 ${e}°C / 최저 ${o.daily.temperature_2m_min[t]}°C`,i.appendChild(n)}))}catch(e){console.error("날씨 정보를 가져오는 중 오류 발생:",e)}}(t,n)}(e,o,r)}catch(e){a.textContent="위치를 찾을 수 없습니다. 다시 시도해주세요."}else a.textContent="도시 이름을 입력해주세요."}))}));